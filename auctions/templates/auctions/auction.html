{% extends 'auctions/layout.html' %}

{% block body %}
  <h1>{{ auction.item.name }}</h1>
  <h3>Listed by: {{ auction.user }}</h3>
  <h5>Current Bid: {{ current_bid }}$</h5>
  <h3>Bid List:</h3>
  <form action="{% url 'place_bid' %}" method="post">
    {% csrf_token %}
    <input type="hidden" name="auction_price" value=" {{ auction.price }}" />
    <input type="hidden" name="auction_id" value="{{ auction.id }}" />
    {{ place_bid_form }}
    <input type="submit" value="Place Bid" class="btn btn-primary" />
  </form>
  <ol>
    {% for bid in auction.auction_bids.all %}
      <li>{{ bid }}</li>
    {% endfor %}
  </ol>
{% endblock %}

{% block navlinks %}
  <li class="nav-item">
    <form class="nav-item" id="watchlist_form" action="{% url 'add_to_watchlist' auction.id %}" method="post">
      {% csrf_token %}
      {% if is_watchlisted %}
        <a class="nav-link" style="color: #007bff; cursor: pointer;" onclick="document.getElementById('watchlist_form').submit();">Remove Watchlist</a>
      {% else %}
        <a class="nav-link" style="color: #007bff; cursor: pointer;" onclick="document.getElementById('watchlist_form').submit();">Add Watchlist</a>
      {% endif %}
    </form>
  </li>
{% endblock %}
